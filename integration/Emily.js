define("CouchDB",function(){var d=null;return{useAdapter:function(a){d=a;return true},getAdapter:function(){return d},getAllDBs:function(a){d.get("_all_dbs",a)}}});
define("Observable",function(){function d(){var a={};this.watch=function(b,c,f){if(typeof b=="string"&&typeof c=="function"){var e=a[b]=a[b]||[];observer=[c,f];e.push(observer);return[b,e.indexOf(observer)]}else return false};this.unwatch=function(b){var c=b[0],b=b[1];return a[c]&&a[c][b]?(a[c][b]=null,true):false};this.notify=function(b,c){var f=a[b],e;if(f){for(e=f.length;e--;)f[e]&&f[e][0].call(f[e][1]||null,c);return true}else return false};this.hasObserver=function(b){return!(!b||!a[b[0]]||!a[b[0]][b[1]])}}
return{create:function(){return new d}}});
define("StateMachine",function(){function d(){var b={},c="";this.init=function(f){return b[f]?(c=f,true):false};this.add=function(c){return b[c]?false:b[c]=new a};this.get=function(c){return b[c]};this.getCurrent=function(){return c};this.event=function(f,a){var d=b[c].event(f,a);return d===false?false:(c=d||c,true)}}function a(){var b={};this.add=function(c,a,d,g){var h=[];if(b[c])return false;return typeof c=="string"&&typeof a=="function"?(h[0]=a,typeof d=="object"&&(h[1]=d),typeof d=="string"&&
(h[2]=d),typeof g=="string"&&(h[2]=g),b[c]=h,true):false};this.has=function(c){return!!b[c]};this.event=function f(f,a){var d=b[f];return d?(d[0].call(d[1],a),d[2]):false}}return{create:function(b,c){var a=new d,e,g;for(e in c)c.hasOwnProperty(e)&&(g=a.add(e),c[e].forEach(function(a){g.add.apply(null,a)}));a.init(b);return a}}});
define("TinyStore",["Observable","Tools"],function(d,a){function b(c){var b={},e=a,g=d.create();e.mixin(c,b);this.getNbItems=function(){return e.count(b)};this.get=function(a){return b[a]};this.has=function(a){return b.hasOwnProperty(a)};this.set=function(a,c){return typeof a=="string"?(b[a]=c,g.notify(a,c),true):false};this.del=function(a){return this.has(a)?(delete b[a],g.notify(a,b[a]),true):false};this.watch=function(a,b,c){return g.watch(a,b,c)};this.unwatch=function(a){return g.unwatch(a)}}
return{create:function(a){return new b(a)}}});define("Tools",function(){return{getGlobal:function(){return function(){return this}.call(null)},mixin:function(d,a,b){for(var c in d)if(d.hasOwnProperty(c)&&(!a[c]||!b))a[c]=d[c]},count:function(d){var a=0,b;for(b in d)d.hasOwnProperty(b)&&a++;return a},compareObjects:function(d,a){return Object.getOwnPropertyNames(d).sort().join("")==Object.getOwnPropertyNames(a).sort().join("")},toArray:function(d){return Array.prototype.slice.call(d)}}});
define("Transport",function(){function d(){var a,b=io;this.connect=function(c){a=b.connect(c);return!!a};this.getSocket=function(){return a};this.on=function(b,d){a.on(b,d)};this.emit=function(b,d){a.emit(b,d)}}return{create:function(a){var b=new d(a);b.connect(a);return b}}});
