/*!
 * NWMatcher 1.2.5 - Fast CSS3 Selector Engine
 * Copyright (C) 2007-2012 Diego Perini
 * See http://nwbox.com/license
 */
(function(n){var bB='nwmatcher-1.2.5',g=typeof exports=='object'?exports:((n.NW||(n.NW={}))&&(n.NW.Dom||(n.NW.Dom={}))),i=n.document,x=i.documentElement,bC=[].slice,Z,I,y,J,t,ba,bb,bc,bd,K='[#.:]?',be='([~*^$|!]?={1})',r='[\\x20\\t\\n\\r\\f]*',bf='[\\x20]|[>+~][^>+~]',bg='[-+]?\\d*n?[-+]?\\d*',L='"[^"]*"'+"|'[^']*'",M='\\[.*\\]|\\(.*\\)|\\{.*\\}',o='(?:[-\\w]|[^\\x00-\\xa0]|\\\\.)',z='(?:-?[_a-zA-Z]{1}[-\\w]*|[^\\x00-\\xa0]+|\\\\.+)+',bh='('+L+'|'+z+')',v=r+'('+o+'+:?'+o+'+)'+r+'(?:'+be+r+bh+')?'+r,bj=v.replace(bh,'([\\x22\\x27]*)((?:\\\\?.)*?)\\3'),A='((?:'+bg+'|'+L+'|'+K+'|'+o+'+|\\['+v+'\\]|\\(.+\\)|'+r+'|,)+)',bk='.+',N='(?=[\\x20\\t\\n\\r\\f]*[^>+~(){}<>])(\\*|(?:'+K+z+')|'+bf+'|\\['+v+'\\]|\\('+A+'\\)|\\{'+bk+'\\}|,)+',bl=N.replace(A,'.*'),B=RegExp(N,'g'),O=RegExp('^'+r+'|'+r+'$','g'),P=RegExp('([^,\\\\\\[\\]]+|\\[[^[\\]]*\\]|\\[.*\\]|\\([^()]+\\)|\\(.*\\)|\\{[^{}]+\\}|\\{.*\\}|\\\\.)+','g'),bm=RegExp('(\\['+v+'\\]|\\('+A+'\\)|[^\\x20>+~]|\\\\.)+','g'),bn=/[\x20\t\n\r\f]+/g,bo=RegExp(z+'|^$'),bp={action:2,cite:2,codebase:2,data:2,href:2,longdesc:2,lowsrc:2,src:2,usemap:2},u={},w={'=':"n=='%m'",'^=':"n.indexOf('%m')==0",'*=':"n.indexOf('%m')>-1",'|=':"(n+'-').indexOf('%m-')==0",'~=':"(' '+n+' ').indexOf(' %m ')>-1",'$=':"n.substr(n.length-'%m'.length)=='%m'"},C={ID:RegExp('^\\*?#('+o+'+)|'+M),TAG:RegExp('^('+o+'+)|'+M),CLASS:RegExp('^\\*?\\.('+o+'+$)|'+M)},q={universal:/^\*(.*)/,id:RegExp('^#('+o+'+)(.*)'),tagName:RegExp('^('+o+'+)(.*)'),className:RegExp('^\\.('+o+'+)(.*)'),attribute:RegExp('^\\['+bj+'\\](.*)'),children:/^[\x20\t\n\r\f]*\>[\x20\t\n\r\f]*(.*)/,adjacent:/^[\x20\t\n\r\f]*\+[\x20\t\n\r\f]*(.*)/,relative:/^[\x20\t\n\r\f]*\~[\x20\t\n\r\f]*(.*)/,ancestor:/^[\x20\t\n\r\f]+(.*)/},Q,s,bq='getElementsByTagName'in i,br='getElementsByClassName'in i,D=typeof i.addEventListener!='function',bs={'href':1,'lang':1,'src':1,'style':1,'title':1,'type':1,'xmlns':1,'xml:lang':1,'xml:space':1},bt={'value':1,'checked':1,'selected':1},bu=D?'.toUpperCase()':'',R='r[r.length]=c[k];if(f&&false===f(c[k]))break;else continue main;',bv=D?'if(e.nodeName<"A")continue;':'',p={CACHING:false,SIMPLENOT:true,USE_HTML5:false,USE_QSAPI:false,VERBOSITY:true},bw=function(a){for(var b in a){p[b]=!!a[b];if(b=='SIMPLENOT'){S={};E={};T={};F={};p['USE_QSAPI']=false;B=RegExp(bl,'g')}else if(b=='USE_QSAPI'){B=RegExp(N,'g')}}},bx=function(a,b,d){var f=-1,c;while((c=b[++f])){if(false===d(a[a.length]=c)){break}}return a},l=function(a){a='SYNTAX_ERR: '+a+' ';if(p.VERBOSITY){if(typeof n.DOMException!='undefined'){throw{code:12,message:a}}else{throw new Error(12,a);}}else{if(n.console&&n.console.log){n.console.log(a)}else{n.status+=a}}},G=function(b,d){var f=i;J=b;i=b.ownerDocument||b;if(d||f!==i){x=i.documentElement;s=i.createElement('DiV').nodeName=='DiV';Q=!s&&typeof i.compatMode=='string'?i.compatMode.indexOf('CSS')<0:(function(){var a=document.createElement('div').style;return a&&(a.width=1)&&a.width=='1px'})();p.CACHING&&g.setCache(true,i)}},U=function(a,b){var d=0,f=null;while((f=b[d])){if(f.getAttribute('id')==a){break}++d}return f},H=!('fileSize'in i)?function(a,b){a=a.replace(/\\/g,'');return b.getElementById&&b.getElementById(a)||U(a,b.getElementsByTagName('*'))}:function(a,b){var d=null;a=a.replace(/\\/g,'');if(s||b.nodeType!=9){return U(a,b.getElementsByTagName('*'))}if((d=b.getElementById(a))&&d.name==a&&b.getElementsByName){return U(a,b.getElementsByName(a))}return d},by=function(a,b){G(b||(b=i));return H(a,b)},bz=function(a,b){return(bp[b]?a.getAttribute(b,2)||'':((a=a.attributes[b])&&a.value)||'')},V=function(a,b,d){var f=typeof a=='string'?a.match(P):a;typeof b=='string'||(b='');if(f.length==1){b+=bi(f[0],d?R:'f&&f(k);return true;')}else{var c=-1,k={},e;while((e=f[++c])){e=e.replace(O,'');if(!k[e]&&(k[e]=true)){b+=bi(e,d?R:'f&&f(k);return true;')}}}if(d)return Function('c,s,r,d,h,g,f','var N,n,x=0,k=-1,e;main:while((e=c[++k])){'+b+'}return r;');else return Function('e,s,r,d,h,g,f','var N,n,x=0,k=e;'+b+'return false;')},bi=function(a,b){var d=0,f,c,k,e,j,h,m;while(a){d++;if((c=a.match(q.universal))){f=''}else if((c=a.match(q.id))){b='if('+(s?'s.getAttr(e,"id")':'(e.submit?s.getAttr(e,"id"):e.id)')+'=="'+c[1]+'"){'+b+'}'}else if((c=a.match(q.tagName))){b='if(e.nodeName'+(s?'=="'+c[1]+'"':bu+'=="'+c[1].toUpperCase()+'"')+'){'+b+'}'}else if((c=a.match(q.className))){b='if((n='+(s?'e.getAttribute("class")':'e.className')+')&&n.length&&(" "+'+(Q?'n.toLowerCase()':'n')+'.replace('+bn+'," ")+" ").indexOf(" '+(Q?c[1].toLowerCase():c[1])+' ")>-1){'+b+'}'}else if((c=a.match(q.attribute))){if(c[2]&&!w[c[2]]){l('Unsupported operator in attribute selectors "'+a+'"');return''}k=c[1].toLowerCase();if(c[2]&&c[4]&&(m=w[c[2]])){h=k in bs;c[4]=c[4].replace(/\\([0-9a-f]{2,2})/,'\\x$1');m=m.replace(/\%m/g,h?c[4].toLowerCase():c[4]);f='n=s.getAttr(e,"'+k+'")'+(h?'.toLowerCase()':'')+';'}else if(!c[2]){if(bt[k]){h='default'+k.charAt(0).toUpperCase()+k.slice(1);f='n=e["'+h+'"];';m='n'}else{f='n=e.attributes["'+k+'"];';m=D?'n&&n.specified':'n'}}else if(c[2]=='!='||c[2]=='='){f='n=e.attributes["'+k+'"];';m='n&&n.value'+c[2]+'="'+c[4]+'"'}else{f='';m='false'}b=f+'if('+m+'){'+b+'}'}else if((c=a.match(q.adjacent))){b='var N'+d+'=e;while(e&&(e=e.previousSibling)){if(e.nodeName>"@"){'+b+'break;}}e=N'+d+';'}else if((c=a.match(q.relative))){b='var N'+d+'=e;e=e.parentNode.firstChild;while(e&&e!=N'+d+'){if(e.nodeName>"@"){'+b+'}e=e.nextSibling;}e=N'+d+';'}else if((c=a.match(q.children))){b='var N'+d+'=e;if(e&&e!==h&&e!==g&&(e=e.parentNode)){'+b+'}e=N'+d+';'}else if((c=a.match(q.ancestor))){b='var N'+d+'=e;while(e&&e!==h&&e!==g&&(e=e.parentNode)){'+b+'}e=N'+d+';'}else{f=false;j=true;for(f in u){if((c=a.match(u[f].Expression))&&c[1]){e=u[f].Callback(c,b);b=e.source;j=e.status;if(j)break}}if(!j){l('Unknown pseudo-class selector "'+a+'"');return''}if(!f){l('Unknown token in selector "'+a+'"');return''}}if(!c){l('Invalid syntax in selector "'+a+'"');return''}a=c&&c[c.length-1]}return b},W=function(a,b,d,f){var c;if(!(a&&a.nodeName>'@')){l('Invalid element argument');return false}else if(!b||typeof b!='string'){l('Invalid selector argument');return false}else if(J!==d){G(d||(d=a.ownerDocument))}b=b.replace(O,'');p.SHORTCUTS&&(b=NW.Dom.shortcuts(b,a,d));if(ba!=b){if((c=b.match(B))&&c[0]==b){Z=(c=b.match(P)).length<2;ba=b;bc=c}else{l('The string "'+b+'", is not a valid CSS selector');return false}}else c=bc;if(!E[b]||S[b]!==d){E[b]=V(Z?[b]:c,'',false);S[b]=d}return E[b](a,X,[],i,x,d,f)},bA=function(a,b){return Y(a,b,function(){return false})[0]||null},Y=function(a,b,d){var f,c,k,e,j,h,m=a;if(arguments.length===0){l('Missing required selector parameters');return[]}else if(a===''){l('Empty selector string');return[]}else if(typeof a!='string'){return[]}else if(b&&!(/1|9|11/).test(b.nodeType)){l('Invalid context element');return[]}else if(J!==b){G(b||(b=i))}if(p.CACHING&&(e=g.loadResults(m,b,i,x))){return d?bx([],e,d):e}a=a.replace(O,'');p.SHORTCUTS&&(a=NW.Dom.shortcuts(a,b));if((c=bb!=a)){if((j=a.match(B))&&j[0]==a){I=(j=a.match(P)).length<2;bb=a;bd=j}else{l('The string "'+a+'", is not a valid CSS selector');return[]}}else j=bd;if(b.nodeType==11){e=b.childNodes}else if(I){if(c){j=a.match(bm);h=j[j.length-1];y=h.split(':not')[0];t=a.length-h.length}if((j=y.match(C.ID))&&(h=j[1])){if((k=H(h,b))){if(W(k,a)){d&&d(k);e=[k]}else e=[]}}else if((j=a.match(C.ID))&&(h=j[1])){if((k=H(h,i))){if('#'+h==a){d&&d(k);e=[k]}if(/[>+~]/.test(a)){b=k.parentNode}else{a=a.replace('#'+h,'*');t-=h.length+1;b=k}}else e=[]}if(e){p.CACHING&&g.saveResults(m,b,i,e);return e}if(!s&&bq&&(j=y.match(C.TAG))&&(h=j[1])){if((e=b.getElementsByTagName(h)).length===0)return[];a=a.slice(0,t)+a.slice(t).replace(h,'*')}else if(!s&&br&&(j=y.match(C.CLASS))&&(h=j[1])){if((e=b.getElementsByClassName(h.replace(/\\/g,''))).length===0)return[];a=a.slice(0,t)+a.slice(t).replace('.'+h,bo.test(a.charAt(a.indexOf(h)-1))?'':'*')}}if(!e){if(D){e=/^(?:applet|object)$/i.test(b.nodeName)?b.childNodes:b.all}else{e=b.getElementsByTagName('*')}}if(!F[a]||T[a]!==b){F[a]=V(I?[a]:j,bv,true);T[a]=b}e=F[a](e,X,[],i,x,b,d);p.CACHING&&g.saveResults(m,b,i,e);return e},S={},E={},T={},F={},X={byId:H,match:W,select:Y,getAttr:bz};Tokens={prefixes:K,encoding:o,operators:be,whitespace:r,identifier:z,attributes:v,combinators:bf,pseudoclass:A,pseudoparms:bg,quotedvalue:L};g.ACCEPT_NODE=R;g.emit=l;g.byId=by;g.match=W;g.first=bA;g.select=Y;g.compile=V;g.configure=bw;g.Config=p;g.Operators=w;g.Selectors=u;g.Snapshot=X;g.Tokens=Tokens;g.setCache=function(){return};g.loadResults=function(){return};g.saveResults=function(){return};g.shortcuts=function(a){return a};g.registerOperator=function(a,b){w[a]||(w[a]=b)};g.registerSelector=function(a,b,d){u[a]||(u[a]={Expression:b,Callback:d})};G(i,true)})(this);
(function(){var g={'a':1,'A':1,'area':1,'AREA':1,'link':1,'LINK':1},h=document.documentElement,f='compareDocumentPosition'in h?function(b,a){return(b.compareDocumentPosition(a)&16)==16}:'contains'in h?function(b,a){return a.nodeType==1&&b.contains(a)}:function(b,a){while((a=a.parentNode)&&a.nodeType==1){if(a===b)return true}return false},i=function(b){return b.getAttribute('href')&&g[b.nodeName]},j=function(b){b=b.firstChild;while(b){if(b.nodeType==3||b.nodeName>'@')return false;b=b.nextSibling}return true},k=function(b,a){var c=1,e=a?'nextSibling':'previousSibling';while((b=b[e])){if(b.nodeName>'@')++c}return c},l=function(b,a){var c=1,e=a?'nextSibling':'previousSibling',d=b.nodeName;while((b=b[e])){if(b.nodeName==d)++c}return c};NW.Dom.Snapshot['contains']=f;NW.Dom.Snapshot['isLink']=i;NW.Dom.Snapshot['isEmpty']=j;NW.Dom.Snapshot['nthOfType']=l;NW.Dom.Snapshot['nthElement']=k})();NW.Dom.registerSelector('nwmatcher:spseudos',/^\:((root|empty|nth-)?(?:(first|last|only)-)?(child)?-?(of-type)?)(?:\(([^\x29]*)\))?(.*)/,function(b,a){var c,e,d,g=true,h,f;switch(b[2]){case'root':if(b[7])a='if(e===h||s.contains(h,e)){'+a+'}';else a='if(e===h){'+a+'}';break;case'empty':a='if(s.isEmpty(e)){'+a+'}';break;default:if(b[2]&&b[6]){if(b[6]=='n'){a='if(e!==h){'+a+'}';break}else if(b[6]=='even'){c=2;d=0}else if(b[6]=='odd'){c=2;d=1}else{d=((e=b[6].match(/(-?\d+)$/))?parseInt(e[1],10):0);c=((e=b[6].match(/(-?\d*)n/))?parseInt(e[1],10):0);if(e&&e[1]=='-')c=-1}h=d<1&&c>1?'(n-('+d+'))%'+c+'==0':c>+1?(b[3]=='last')?'(n-('+d+'))%'+c+'==0':'n>='+d+'&&(n-('+d+'))%'+c+'==0':c<-1?(b[3]=='last')?'(n-('+d+'))%'+c+'==0':'n<='+d+'&&(n-('+d+'))%'+c+'==0':c===0?'n=='+d:(b[3]=='last')?c==-1?'n>='+d:'n<='+d:c==-1?'n<='+d:'n>='+d;a='if(e!==h){n=s['+(b[5]?'"nthOfType"':'"nthElement"')+'](e,'+(b[3]=='last'?'true':'false')+');if('+h+'){'+a+'}}'}else if(b[3]){c=b[3]=='first'?'previous':'next';e=b[3]=='only'?'previous':'next';d=b[3]=='first'||b[3]=='last';f=b[5]?'&&n.nodeName!==e.nodeName':'&&n.nodeName<"@"';a='if(e!==h){'+('n=e;while((n=n.'+c+'Sibling)'+f+');if(!n){'+(d?a:'n=e;while((n=n.'+e+'Sibling)'+f+');if(!n){'+a+'}')+'}')+'}'}else{g=false}break}return{'source':a,'status':g}});NW.Dom.registerSelector('nwmatcher:dpseudos',/^\:(link|visited|target|lang|not|active|focus|hover|checked|disabled|enabled|selected)(?:\((["']*)(.*?(\(.*\))?[^'"()]*?)\2\))?(.*)/,(function(){var g=document,h=NW.Dom.Config,f=NW.Dom.Tokens,i=RegExp('^'+f.whitespace+'|'+f.whitespace+'$','g'),j=RegExp('^((?!:not)('+f.prefixes+'|'+f.identifier+'|\\([^()]*\\))+|\\['+f.attributes+'\\])$');return function(b,a){var c,e=true,d;switch(b[1]){case'not':c=b[3].replace(i,'');if(h.SIMPLENOT&&!j.test(c)){NW.Dom.emit('Negation pseudo-class only accepts simple selectors "'+b.join('')+'"')}else{if('compatMode'in g){a='if(!'+NW.Dom.compile([c],'',false)+'(e,s,r,d,h,g)){'+a+'}'}else{a='if(!s.match(e, "'+c.replace(/\x22/g,'\\"')+'",g)){'+a+'}'}}break;case'checked':d='if((typeof e.form!=="undefined"&&(/^(?:radio|checkbox)$/i).test(e.type)&&e.checked)';a=(h.USE_HTML5?d+'||(/^option$/i.test(e.nodeName)&&e.selected)':d)+'){'+a+'}';break;case'disabled':a='if(((typeof e.form!=="undefined"&&!(/hidden/i).test(e.type))||s.isLink(e))&&e.disabled){'+a+'}';break;case'enabled':a='if(((typeof e.form!=="undefined"&&!(/hidden/i).test(e.type))||s.isLink(e))&&!e.disabled){'+a+'}';break;case'lang':d='';if(b[3])d=b[3].substr(0,2)+'-';a='do{(n=e.lang||"").toLowerCase();if((n==""&&h.lang=="'+b[3].toLowerCase()+'")||(n&&(n=="'+b[3].toLowerCase()+'"||n.substr(0,3)=="'+d.toLowerCase()+'"))){'+a+'break;}}while((e=e.parentNode)&&e!==g);';break;case'target':n=g.location?g.location.hash:'';if(n){a='if(e.id=="'+n.slice(1)+'"){'+a+'}'}break;case'link':a='if(s.isLink(e)&&!e.visited){'+a+'}';break;case'visited':a='if(s.isLink(e)&&e.visited){'+a+'}';break;case'active':a='if(e===d.activeElement){'+a+'}';break;case'hover':a='if(e===d.hoverElement){'+a+'}';break;case'focus':a='hasFocus'in g?'if(e===d.activeElement&&d.hasFocus()&&(e.type||e.href)){'+a+'}':'if(e===d.activeElement&&(e.type||e.href)){'+a+'}';break;case'selected':a='if(e.nodeName.toLowerCase()=="option"&&e.selected){'+a+'}';break;default:e=false;break}return{'source':a,'status':e}}})());
