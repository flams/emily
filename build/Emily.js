function Emily(){var e={};this.declare=function(c,a){e[c]=new a(this);return true};this.require=function(c){return e[c]}}Emily=new Emily;
Emily.declare("Observable",function(){function e(){var c={};this.watch=function(a,d,f){if(typeof a=="string"&&typeof d=="function"){var b=c[a]=c[a]||[];observer=[d,f];b.push(observer);return[a,b.indexOf(observer)]}else return false};this.unwatch=function(a){var d=a[0],a=a[1];return c[d]&&c[d][a]?(c[d][a]=null,true):false};this.notify=function(a,d){var f=c[a],b;if(f){for(b=f.length;b--;)f[b]&&f[b][0].call(f[b][1]||window,d);return true}else return false};this.hasObserver=function(a){return!(!a||!c[a[0]]||
!c[a[0]][a[1]])}}this.create=function(){return new e}});Emily.declare("Promises",function(){});
Emily.declare("TinyStore",function(e){function c(a){var d={},c=e.require("Observable").create();this.length=0;(function(b){for(var a in b)b.hasOwnProperty(a)&&(this.length++,d[a]=b[a])}).call(this,a);this.get=function(b){return d[b]};this.has=function(b){return d.hasOwnProperty(b)};this.set=function(b,a){var e;return typeof b=="string"?(e=d[b],d[b]=a,e||this.length++,c.notify(b,a,e),true):false};this.del=function(a){return this.has(a)?(this.length--,delete d[a],c.notify(a,d[a]),true):false};this.watch=
function(a,d,e){return c.watch(a,d,e)};this.unwatch=function(a){return c.unwatch(a)}}this.create=function(a){return new c(a)}});
