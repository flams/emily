define("Observable",function(){function d(){var b={};this.watch=function(a,e,c){if(typeof a=="string"&&typeof e=="function"){var d=b[a]=b[a]||[];observer=[e,c];d.push(observer);return[a,d.indexOf(observer)]}else return false};this.unwatch=function(a){var e=a[0],a=a[1];return b[e]&&b[e][a]?(b[e][a]=null,true):false};this.notify=function(a,e){var c=b[a],d;if(c){for(d=c.length;d--;)c[d]&&c[d][0].call(c[d][1]||null,e);return true}else return false};this.hasObserver=function(a){return!(!a||!b[a[0]]||!b[a[0]][a[1]])}}
return{create:function(){return new d}}});
define("StateMachine",["Tools"],function(){function d(){var a={},e="";return{init:function(c){return a[c]?(e=c,true):false},add:function(c){return a[c]?false:a[c]=new b},get:function(c){return a[c]},getCurrent:function(){return e},event:function(c){c=a[e].event(c);return c===false?false:(e=c||e,true)}}}function b(){var a={};return{add:function(e,c,b,d){var f=[];if(a[e])return false;return typeof e=="string"&&typeof c=="function"?(f[0]=c,typeof b=="object"&&(f[1]=b),typeof b=="string"&&(f[2]=b),typeof d==
"string"&&(f[2]=d),a[e]=f,true):false},event:function c(c,b){var d=a[c];return d?(d[0].call(d[1],b),d[2]):false}}}return{create:function(){return new d}}});
define("TinyStore",["Observable","Tools"],function(d,b){function a(a){var c={},h=b,g=d.create();h.mixin(a,c);this.getNbItems=function(){return h.count(c)};this.get=function(a){return c[a]};this.has=function(a){return c.hasOwnProperty(a)};this.set=function(a,b){return typeof a=="string"?(c[a]=b,g.notify(a,b),true):false};this.del=function(a){return this.has(a)?(delete c[a],g.notify(a,c[a]),true):false};this.watch=function(a,b,c){return g.watch(a,b,c)};this.unwatch=function(a){return g.unwatch(a)}}
return{create:function(b){return new a(b)}}});define("Tools",function(){return{getGlobal:function(){return function(){return this}.call(null)},mixin:function(d,b,a){for(var e in d)if(d.hasOwnProperty(e)&&(!b[e]||!a))b[e]=d[e]},count:function(d){var b=0,a;for(a in d)d.hasOwnProperty(a)&&b++;return b},compareObjects:function(d,b){return Object.getOwnPropertyNames(d).sort().join("")==Object.getOwnPropertyNames(b).sort().join("")},toArray:function(d){return Array.prototype.slice.call(d)}}});
define("Transport",function(){function d(){var b,a=io;this.connect=function(d){b=a.connect(d);return!!b};this.getSocket=function(){return b};this.on=function(a,c){b.on(a,c)};this.emit=function(a,c){b.emit(a,c)}}return{create:function(b){var a=new d(b);a.connect(b);return a}}});
